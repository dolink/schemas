{
  "id": "http://schema.dolink.co/protocol/posair",
  "$schema": "/protocol",
  "methods": {
    "print": {
      "description": "打印",
      "params": [
        {
          "name": "data",
          "value": { "$ref": "#/definitions/data" }
        }
      ]
    }
  },
  "events": {
    "state": {
      "value": {
        "$ref": "#/definitions/state"
      }
    },
    "data": {
      "value": {
        "$ref": "#/definitions/data"
      }
    }
  },
  "definitions": {
    "state": {
      "type": "object",
      "properties": {
        "device": {
          "$ref": "#/definitions/device"
        },
        "host": {
          "$ref": "#/definitions/host"
        }
      }
    },
    "device": {
      "type": "object",
      "description": "打印机信息",
      "properties": {
        "connected": {
          "type": "boolean",
          "description": "Whether is connected"
        },
        "vid": {
          "type": "number",
          "description": "Vendor ID"
        },
        "pid": {
          "type": "number",
          "description": "Product ID"
        },
        "port": {
          "type": "string",
          "description": "设备插入的 Bus-Ports 位置, 如: 1-1.2"
        },
        "interface": {
          "type": "string",
          "enum": ["usb", "com", "parallel"],
          "description": "接口类型: USB, 串口, 并口"
        },
        "description": {
          "type": "string",
          "description": "设备描述信息"
        }
      }
    },
    "host": {
      "type": "object",
      "description": "主机接入",
      "properties": {
        "connected": {
          "type": "boolean",
          "description": "Whether is connected"
        },
        "interface": {
          "type": "string",
          "enum": ["usb", "com", "parallel"]
        },
        "description": {
          "type": "string"
        }
      }
    },
    "data": {
      "type": "object",
      "description": "打印数据格式",
      "properties": {
        "protocol": {
          "type": "string",
          "description": "内容协议, 比如: escpos 或者 txt"
        },
        "encoding": {
          "type": "string",
          "description": "内容编码格式, 比如: base64"
        },
        "content": {
          "type": "string",
          "description": "数据内容"
        }
      }
    }
  }
}
